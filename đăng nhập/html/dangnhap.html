<!DOCTYPE html>
<html>
<head>
    <!-- Tên của trang web -->
    <title>Đăng nhập</title>
    <link rel="stylesheet" href="/đăng nhập/css/dangnhap.css">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    
</head>
<body>  
<div class="container2">
    <div class="navbar">
        <div class="logo">
            <img src="/đăng nhập/image/logo.png" width="200px">
        </div>
        <nav>
          <ul>
              <li><a href="">Home</a></li>
              <li><a href="">About</a></li>
              <li><a href="">Contact</a></li>
              <li><a href="">Account</a></li>
          </ul>
        </nav>
    </div>
</div>

<div class="container">
    <div class="main">
        <form id="MainForm">
            <h1>Đăng nhập</h1><br>
            <div class="input-box">
                <input id="email_input" type="email" placeholder="Email" required>
                <i class='bx bxs-user'></i>
            </div>
            <div class="input-box">
                <input id="pass_input" type="password" placeholder="Password" required>
                <i class='bx bxs-lock-alt'></i>
            </div>

            <div class="remember-forgot">
                <label><input type="checkbox"> Remember me</label>
                <label class="forgot" id="forgotpasslabel" style="cursor:pointer;">Forgot password</label>
            </div>
            <button type="submit" class="login">Login</button>

            <button class="gg" id="googleLogin">
                <img src="/đăng nhập/image/7123025_logo_google_g_icon.png" 
                     alt="Google Login" >
            </button>
            
        </form>
    </div>
</div>  

<div class="footer">
    <div class="c3">
         <div class="row">
             <div class="footer-col-1">
                 <h3>Download our app</h3>
                 <p>Download App for Android and Ios mobile phone</p>
                 <div class="app-logo">
                     <img class="playstore" src="/đăng nhập/image/play-store-logo-33874.png" width="140px">
                     <img class="appstore" src="/đăng nhập/image/app-store-png-logo-33116.png" width="200px">
                 </div>
             </div>
             <div class="footer-col-2">
                 <img src="/đăng nhập/image/logo.png" width="300px">
                 <p>Our purpose is to sustainably make the pleasure</p>
             </div>
             <div class="footer-col-3">
                 <h3>Useful links</h3>
                 <ul>
                     <li>Coupons</li>
                     <li>Blog post</li>
                     <li>Return Policy</li>
                     <li>Join Affiliate</li>
                 </ul>
             </div>
             <div class="footer-col-4">
                 <h3>Follow us</h3>
                 <ul>
                     <li>Facebook</li>
                     <li>Twitter</li>
                     <li>Instagram</li>
                     <li>Youtube</li>
                 </ul>
             </div>
    </div>
</div>

<!-- Firebase Script -->
<script type="module">
    // Import Firebase SDKs
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.4.0/firebase-app.js";
    import { getDatabase, ref } from "https://www.gstatic.com/firebasejs/11.4.0/firebase-database.js";
    import { getAuth, signInWithEmailAndPassword, sendPasswordResetEmail, GoogleAuthProvider, signInWithPopup } from "https://www.gstatic.com/firebasejs/11.4.0/firebase-auth.js";

    // Firebase config
    const firebaseConfig = {
      apiKey: "AIzaSyAM97h4SZzzqF-mCbcnqQGk4zVjPFvtvy8",
      authDomain: "fir-893ff.firebaseapp.com",
      projectId: "fir-893ff",
      storageBucket: "fir-893ff.firebasestorage.app",
      messagingSenderId: "583333167187",
      appId: "1:583333167187:web:c3cc99f7631411cdd0c6a6",
      measurementId: "G-661H4GGZGK"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const db = getDatabase();
    const auth = getAuth(app);
    const provider = new GoogleAuthProvider();

    // Elements
    const emailInt = document.getElementById('email_input');
    const passInt = document.getElementById('pass_input');
    const MainForm = document.getElementById('MainForm');
    const forgotpasslabel = document.getElementById('forgotpasslabel');
    const googleLogin = document.getElementById('googleLogin');

    // Đăng nhập bằng email/password
    const SignInUser = event => {
        event.preventDefault();

        signInWithEmailAndPassword(auth, emailInt.value.trim(), passInt.value.trim())
        .then((credentials) => {
            alert("Đăng nhập thành công!");
            window.location.href = "/Trang chủ/trangchu.html"; // Link sau đăng nhập
        })
        .catch((error) => {
            alert(error.message);
            console.error(error.code, error.message);
        });
    };

    // Quên mật khẩu
    const ForgotPassword = () => {
        if (emailInt.value.trim() === "") {
            alert("Vui lòng nhập email để reset mật khẩu!");
            return;
        }
        sendPasswordResetEmail(auth, emailInt.value.trim())
        .then(() => {
            alert("Đã gửi link đặt lại mật khẩu vào email!");
        })
        .catch((error) => {
            console.error(error.code, error.message);
        });
    };

    // Đăng nhập bằng Google
    const LoginGoogleBtn = () => {
        signInWithPopup(auth, provider)
        .then((result) => {
            const user = result.user;
            alert("Đăng nhập thành công bằng Google!");
            window.location.href = "/Trang chủ/trangchu.html";
        })
        .catch((error) => {
            console.error(error.code, error.message);
        });
    };

    // Gán sự kiện
    MainForm.addEventListener("submit", SignInUser);
    forgotpasslabel.addEventListener("click", ForgotPassword);
    googleLogin.addEventListener("click", LoginGoogleBtn);
</script>

</body>
</html>
