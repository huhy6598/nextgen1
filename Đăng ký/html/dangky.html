<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Đăng ký</title>
    <link rel="stylesheet" href="/Đăng ký/css/dangky.css">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
</head>
<body>
    <div class="container2">
        <div class="navbar">
            <div class="logo">
                <img src="/Đăng ký/image/logo.png" width="200px">
            </div>
            <nav>
                <ul>
                    <li><a href="">Home</a></li>
                    <li><a href="">About</a></li>
                    <li><a href="">Contact</a></li>
                    <li><a href="">Account</a></li>
                </ul>
            </nav>
        </div>
    </div>

    <div class="container">
        <div class="main">
            <form id="MainForm">
                <h1>Đăng ký</h1><br>
                <div class="input-box">
                    <input id="username" type="text" placeholder="Username" required>
                    <i class='bx bxs-user'></i>
                </div>
                <div class="input-box">
                    <input id="email_input" type="email" placeholder="Mail" required>
                    <i class='bx bxl-gmail'></i>
                </div>
                <div class="input-box">
                    <input id="pass_input" type="password" placeholder="Password" required>
                    <i class='bx bxs-lock-alt'></i>
                </div>
                <div class="remember-forgot">
                    <label><input type="checkbox" required>  I agree to the terms & conditions</label>
                </div>
                <button type="submit" class="login">Sign up</button>
                <div class="register-link">
                    <p>Đã có tài khoản?
                        <a href="/đăng nhập/html/dangnhap.html">Login</a>
                    </p> 
                </div>
            </form>
        </div>
    </div>

    <div class="footer">
        <div class="c3">
            <div class="row">
                <div class="footer-col-1">
                    <h3>Download our app</h3>
                    <p>Download App for Android and Ios mobile phone</p>
                    <div class="app-logo">
                        <img class="playstore" src="/Đăng ký/image/play-store-logo-33874.png" width="140px">
                        <img class="appstore" src="/Đăng ký/image/app-store-png-logo-33116.png" width="200px">
                    </div>
                </div>
                <div class="footer-col-2">
                    <img src="/Đăng ký/image/logo.png" width="300px">
                    <p>Our purpose is to sustainably make the pleasure</p>
                </div>
                <div class="footer-col-3">
                    <h3>Useful links</h3>
                    <ul>
                        <li>Coupons</li>
                        <li>Blog post</li>
                        <li>Return Policy</li>
                        <li>Join Affiliate</li>
                    </ul>
                </div>
                <div class="footer-col-4">
                    <h3>Follow us</h3>
                    <ul>
                        <li>Facebook</li>
                        <li>Twitter</li>
                        <li>Instagram</li>
                        <li>Youtube</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Thêm Firebase -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.4.0/firebase-app.js";
        import { getDatabase, ref, set } from "https://www.gstatic.com/firebasejs/11.4.0/firebase-database.js";
        import { getAuth, createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/11.4.0/firebase-auth.js";

        // Firebase config
        const firebaseConfig = {
            apiKey: "AIzaSyAM97h4SZzzqF-mCbcnqQGk4zVjPFvtvy8",
            authDomain: "fir-893ff.firebaseapp.com",
            projectId: "fir-893ff",
            storageBucket: "fir-893ff.appspot.com",
            messagingSenderId: "583333167187",
            appId: "1:583333167187:web:c3cc99f7631411cdd0c6a6",
            measurementId: "G-661H4GGZGK"
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase();
        const auth = getAuth(app);

        let MainForm = document.getElementById('MainForm');
        let emailInput = document.getElementById('email_input');
        let passInput = document.getElementById('pass_input');
        let usernameInput = document.getElementById('username');

        let RegisterUser = event => {
            event.preventDefault();

            createUserWithEmailAndPassword(auth, emailInput.value.trim(), passInput.value.trim())
                .then((credentials) => {
                    set(ref(db, 'UserAuthList/' + credentials.user.uid), {
                        username: usernameInput.value.trim(),
                        email: emailInput.value.trim()
                    });
                    alert("Đăng ký thành công!");
                    window.location.href="/đăng nhập/html/dangnhap.html";
                })
                .catch((error) => {
                    alert(error.message);
                    console.log(error.code);
                    console.log(error.message);
                });
        }

        MainForm.addEventListener('submit', RegisterUser);
    </script>

</body>
</html>
